# Section 11. ë‹¤í˜•ì„± (1)

## ë‹¤í˜•ì„±

- `ë‹¤ì–‘í•œ í˜•íƒœ`, `ì—¬ëŸ¬ í˜•íƒœ`ë¥¼ ëœ»í•œë‹¤.
- í•œ ê°ì²´ê°€ ì—¬ëŸ¬ íƒ€ì…ì˜ ê°ì²´ë¡œ ì·¨ê¸‰ë  ìˆ˜ ìˆëŠ” ëŠ¥ë ¥ì„ ëœ»í•œë‹¤.
    - ë‹¤í˜•ì„±ì„ ì‚¬ìš©í•˜ë©´ í•˜ë‚˜ì˜ ê°ì²´ê°€ ë‹¤ë¥¸ íƒ€ì…ìœ¼ë¡œ ì‚¬ìš©ë  ìˆ˜ ìˆë‹¤.

## ë‹¤í˜•ì„±ì„ ì´í•´í•˜ê¸° ìœ„í•œ 2ê°€ì§€ í•µì‹¬ ì´ë¡ 

### 1. ë‹¤í˜•ì  ì°¸ì¡°

### 2. ë©”ì„œë“œ ì˜¤ë²„ë¼ì´ë”©

---

## 1. ë‹¤í˜•ì  ì°¸ì¡°

```java
// ë¶€ëª¨ ë³€ìˆ˜ê°€ ìì‹ ì¸ìŠ¤í„´ìŠ¤ ì°¸ì¡° (ë‹¤í˜•ì  ì°¸ì¡°)
Parent poly = new Child();
poly.parentMethod();

// ìì‹ì˜ ê¸°ëŠ¥ì€ í˜¸ì¶œí•  ìˆ˜ ì—†ë‹¤. (ì»´íŒŒì¼ ì˜¤ë¥˜ ë°œìƒ)
// poly.childMethod();

// ìì‹ì€ ë¶€ëª¨ë¥¼ ë‹´ì„ ìˆ˜ ì—†ë‹¤
// Child child1 = new Parent();

```

- ì˜ˆì œ ì„¤ëª…
    - ë¶€ëª¨ íƒ€ì…ì˜ ë³€ìˆ˜ê°€ ìì‹ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì°¸ì¡°í•˜ëŠ” ê²½ìš°ì´ë‹¤.
    - `Parent poly = new Child()`
        - Child ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“¤ì—ˆìœ¼ë¯€ë¡œ ë©”ëª¨ë¦¬ ìƒì— `Child`ì™€ `Parent`ê°€ ëª¨ë‘ ìƒì„±ëœë‹¤.
        - ìƒì„±ëœ ì°¸ì¡°ê°’ì„ `Parent` íƒ€ì…ì˜ ë³€ìˆ˜ì¸ `poly`ì— ë‹´ì•„ë‘”ë‹¤.

**ğŸ’¡ë¶€ëª¨ëŠ” ìì‹ì„ ë‹´ì„ ìˆ˜ ìˆë‹¤.**

- ìì‹ íƒ€ì…ì€ ë¶€ëª¨ íƒ€ì…ì„ ë‹´ì„ ìˆ˜ ì—†ë‹¤.
- ìë°”ì—ì„œ ë¶€ëª¨ íƒ€ì…ì€ ìì‹ ì„ ê¸°ì¤€ìœ¼ë¡œ ëª¨ë“  ìì‹ íƒ€ì…ì„ ì°¸ì¡°í•  ìˆ˜ ìˆë‹¤.
    - ë‹¤ì–‘í•œ í˜•íƒœë¥¼ ì°¸ì¡°í•˜ë¯€ë¡œ ì´ë¥¼ **`ë‹¤í˜•ì  ì°¸ì¡°`**ë¼ í•œë‹¤.

## ë‹¤í˜•ì„±ê³¼ ìºìŠ¤íŒ…

`poly`ëŠ” `Parent` íƒ€ì…ì´ë¯€ë¡œ `poly.childMehtod()`ë¥¼ í˜¸ì¶œì‹œ `childMethod()`ë¥¼ ì°¸ì¡°í•  ìˆ˜ ì—†ì–´ ì»´íŒŒì¼ ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤.

`childMethod`ë¥¼ í˜¸ì¶œí•˜ë ¤ë©´ **`ìºìŠ¤íŒ…`**ì´ í•„ìš”í•˜ë‹¤.

- í˜¸ì¶œí•˜ëŠ” íƒ€ì…ì„ `Child` íƒ€ì…ìœ¼ë¡œ ë³€ê²½í•˜ë©´ `childMethod()`ë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤.
    - â€¼ï¸Â ê·¸ëŸ¬ë‚˜ ìì‹ì€ ë¶€ëª¨ë¥¼ ë‹´ì„ ìˆ˜ ì—†ë‹¤.
        - `Child child = poly`  (x)
            - polyëŠ” Parent íƒ€ì…ì´ë¯€ë¡œ child ë³€ìˆ˜ì— ë‹´ì„ ìˆ˜ ì—†ë‹¤.
    - ğŸ’¡Â ë‹¤ìš´ìºìŠ¤íŒ…ì„ í†µí•´ ë¶€ëª¨ íƒ€ì…ì„ ì ê¹ ìì‹ íƒ€ì…ìœ¼ë¡œ ë³€ê²½í•˜ë©´ ëœë‹¤.
        - `Child child = (Child) poly`

```java
Parent poly = new Child();

// ìì‹ì˜ ê¸°ëŠ¥ì€ í˜¸ì¶œí•  ìˆ˜ ì—†ë‹¤. (ì»´íŒŒì¼ ì˜¤ë¥˜ ë°œìƒ)
// poly.childMethod();

// ë‹¤ìš´ìºìŠ¤íŒ… (ë¶€ëª¨íƒ€ì… -> ìì‹íƒ€ì…)
Child child = (Child) poly;
child.childMethod();

```

## ìºìŠ¤íŒ…

- í˜•ì‹ : `(Type) target`
- í•˜ë‚˜ì˜ ë°ì´í„° íƒ€ì…ì„ ë‹¤ë¥¸ ë°ì´í„° íƒ€ì…ìœ¼ë¡œ ë³€ê²½í•˜ëŠ” ê²ƒì´ë‹¤.
- ìºìŠ¤íŒ…í•œ ì°¸ì¡°ê°’ì˜ ê¸°ì¡´ íƒ€ì…ì€ ìœ ì§€ëœë‹¤.
- ì¢…ë¥˜
    - `ì—…ìºìŠ¤íŒ…` : ë¶€ëª¨ íƒ€ì…ìœ¼ë¡œ ë³€ê²½
    - `ë‹¤ìš´ìºìŠ¤íŒ…` : ìì‹ íƒ€ì…ìœ¼ë¡œ ë³€ê²½

### ì¼ì‹œì  ë‹¤ìš´ ìºìŠ¤íŒ…

- ë‹¤ìš´ìºìŠ¤íŒ… ê²°ê³¼ë¥¼ ë³€ìˆ˜ì— ë‹´ì•„ë‘ëŠ” ê³¼ì •ì„ ìƒëµí•˜ê³  ì¼ì‹œì ìœ¼ë¡œ ë‹¤ìš´ ìºìŠ¤íŒ…ì„ í•´ì„œ ì¸ìŠ¤í„´ìŠ¤ì— ìˆëŠ” í•˜ìœ„ í´ë˜ìŠ¤ì˜ ê¸°ëŠ¥ì„ ë°”ë¡œ í˜¸ì¶œí•  ìˆ˜ ìˆê²Œ í•œë‹¤.

```java
Parent poly = new Child();
((Child) poly).childMethod();
```

### ì—…ìºìŠ¤íŒ…

- ì—…ìºìŠ¤íŒ…ì€ ìƒëµ ê°€ëŠ¥í•˜ë‹¤. (ê¶Œì¥)

```java
Child child = new Child();
// childë¥¼ Parent íƒ€ì…ìœ¼ë¡œ ì—…ìºìŠ¤íŒ…
Parent parent1 = (Parent) child;
Parent parent2 = child; // ì—…ìºìŠ¤íŒ… ìƒëµ ê°€ëŠ¥
```

### ë‹¤ìš´ìºìŠ¤íŒ…

- ì˜ëª»í•˜ë©´ ì‹¬ê°í•œ ëŸ¬íƒ€ì„ ì˜¤ë¥˜ê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤.

```java
Parent parent1 = new Child();
Child child1 = (Child) parent1;
child1.childMethod(); // ë¬¸ì œ ì—†ìŒ

Parent parent2 = new Parent();
Child child2 = (Child) parent2; // ëŸ°íƒ€ì„ ì˜¤ë¥˜ - ClassCastException
child2.childMethod(); // ì‹¤í–‰ ë¶ˆê°€
```

- ì˜ˆì œ ì„¤ëª…
    - `parent2`ëŠ” `new Parent()` ë¶€ëª¨ íƒ€ì…ìœ¼ë¡œ ê°ì²´ë¥¼ ìƒì„±í•˜ë¯€ë¡œ ë©”ëª¨ë¦¬ ìƒì— ìì‹ íƒ€ì…ì´ ì „í˜€ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤. ê·¸ëŸ¬ë¯€ë¡œ `parent2`ë¥¼ Child íƒ€ì…ìœ¼ë¡œ ë‹¤ìš´ìºìŠ¤íŒ…í•˜ëŠ” ê²½ìš° `Child` íƒ€ì… ìì²´ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìœ¼ë¯€ë¡œ `ClassCastException` ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤.
- ì—…ìºìŠ¤íŒ…ì˜ ê²½ìš° ìƒìœ„ ë¶€ëª¨ íƒ€ì…ìœ¼ë¡œ ë³€ê²½ë˜ëŠ” ê²ƒì´ë¯€ë¡œ ë©”ëª¨ë¦¬ ìƒì— ë¶€ëª¨ íƒ€ì…ì´ ì¡´ì¬í•˜ê¸° ë•Œë¬¸ì— í•­ìƒ ì•ˆì „í•˜ì§€ë§Œ, ë‹¤ìš´ìºìŠ¤íŒ…ì˜ ê²½ìš° ì¸ìŠ¤í„´ìŠ¤ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” í•˜ìœ„íƒ€ì…ìœ¼ë¡œ ìºìŠ¤íŒ…í•˜ë©´ ë¬¸ì œê°€ ë°œìƒí•˜ë¯€ë¡œ, ì´ ë¬¸ì œë¥¼ ì¸ì§€í•˜ê³  ì‚¬ìš©í•œë‹¤ëŠ” ì˜ë¯¸ë¡œ ëª…ì‹œì ìœ¼ë¡œ ìºìŠ¤íŒ…ì„ í•´ì£¼ì–´ì•¼ í•œë‹¤.
- í´ë˜ìŠ¤ A, B, Cê°€ A > B > C ì˜ ìƒì† ê´€ê³„ë¥¼ ì§€ë‹ˆëŠ” ê²½ìš°
    - `A a = new B()` : Aë¡œ ì—…ìºìŠ¤íŒ…
    - `B b = new B()` : ìì‹ ê³¼ ê°™ì€ íƒ€ì…
    - `C c = new B()` : í•˜ìœ„ íƒ€ì…ì€ ëŒ€ì… ë¶ˆê°€ëŠ¥ (ì»´íŒŒì¼ ì˜¤ë¥˜ ë°œìƒ)
    - `C c = (C) new B()` : í•˜ìœ„ íƒ€ì…ìœ¼ë¡œ ê°•ì œ ë‹¤ìš´ìºìŠ¤íŒ… (ëŸ°íƒ€ì„ ì˜¤ë¥˜ ë°œìƒ)

(+) **ì»´íŒŒì¼ ì˜¤ë¥˜ vs ëŸ°íƒ€ì„ ì˜¤ë¥˜**

- **ì»´íŒŒì¼ ì˜¤ë¥˜**
    - ë³€ìˆ˜ëª… ì˜¤íƒ€, ì˜ëª»ëœ í´ë˜ìŠ¤ ì´ë¦„ ì‚¬ìš© ë“± ìë°” í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰í•˜ê¸° ì „ì— ã…‚ë¼ìƒí•˜ëŠ” ì˜¤ë¥˜ì´ë‹¤.
    - IDEì—ì„œ ì¦‰ì‹œ í™•ì¸í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì•ˆì „í•˜ê³  ì¢‹ì€ ì˜¤ë¥˜ì´ë‹¤.
- **ëŸ°íƒ€ì„ ì˜¤ë¥˜**
    - í”„ë¡œê·¸ë¨ì´ ì‹¤í–‰ë˜ê³  ìˆëŠ” ì‹œì ì— ë°œìƒí•˜ëŠ” ì˜¤ë¥˜ì´ë‹¤.
    - ê³ ê°ì´ í•´ë‹¹ í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰í•˜ëŠ” ë„ì¤‘ì— ë°œìƒí•˜ê¸° ë•Œë¬¸ì— ë§¤ìš° ì•ˆ ì¢‹ì€ ì˜¤ë¥˜ì´ë‹¤.

## instanceof

ë³€ìˆ˜ê°€ ì°¸ì¡°í•˜ëŠ” ì¸ìŠ¤í„´ìŠ¤ì˜ íƒ€ì…ì„ í™•ì¸í•˜ê³  ì‹¶ì€ ê²½ìš° ì‚¬ìš©í•œë‹¤.

```java
Parent parent1 = new Parent();
call(parent1); // childMethod í˜¸ì¶œ X

Parent parent2 = new Child();
call(parent2); //childMethod í˜¸ì¶œ O

private static void call(Parent parent) {
	if (parent instanceof Child) {
		System.out.println("Child ì¸ìŠ¤í„´ìŠ¤ ë§ìŒ");
		Child child = (Child) parent;
		child.childMethod();
	}
}
```

```java
new Parent() instanceof Parent // true
new Child() instanceof Parent // true
new Parent() instanceof Child // false
new Child() instanceof Child // true

Parent parent = new Child
parent instanceof Child // true
```

### Java16 - Pattern Matching for instanceof

- `instanceof`ì„ ì‚¬ìš©í•˜ëŠ” ë™ì‹œì— ë³€ìˆ˜ë¥¼ ì„ ì–¸í•  ìˆ˜ ìˆë‹¤.

    ```java
    Parent parent1 = new Parent();
    call(parent1);
    
    Parent parent2 = new Child();
    call(parent2);
    
    private static void call(Parent parent) {
    	if (parent instanceof Child child) { // ë³€ìˆ˜ ì„ ì–¸
    		System.out.println("Child ì¸ìŠ¤í„´ìŠ¤ ë§ìŒ");
    		// Child child = (Child) parent; ìƒëµ
    		child.childMethod();
    	}
    ```


---

## 2. ë‹¤í˜•ì„±ê³¼ ë©”ì„œë“œ ì˜¤ë²„ë¼ì´ë”©

***ì˜¤ë²„ë¼ì´ë”© ëœ ë©”ì„œë“œëŠ” í•­ìƒ ìš°ì„ ê¶Œì„ ê°€ì§„ë‹¤.***

```java
// Child í´ë˜ìŠ¤ê°€ Parentì˜ method ë©”ì„œë“œë¥¼ ì˜¤ë²„ë¼ì´ë”©

Parent poly new Child();
System.out.println(poly.value); // ë³€ìˆ˜ëŠ” ì˜¤ë²„ë¼ì´ë”© X
poly.method(); // ë©”ì„œë“œ ì˜¤ë²„ë¼ì´ë”©
```

- `poly` ë³€ìˆ˜ëŠ” `Parent` íƒ€ì…ìœ¼ë¡œ, `poly.value`, `poly.method()`ë¥¼ í˜¸ì¶œí•˜ë©´ Parent íƒ€ì…ì—ì„œ ê¸°ëŠ¥ì„ ì°¾ì•„ì„œ ì‹¤í–‰í•œë‹¤.
    - `poly.value`
        - `Parent` íƒ€ì…ì— ìˆëŠ” `value` ê°’ì„ ì½ëŠ”ë‹¤.
    - `poly.method()`
        - `Parent` íƒ€ì…ì— ìˆëŠ” `method()`ë¥¼ ì‹¤í–‰í•˜ë ¤ í•˜ì§€ë§Œ `Child.method()`ê°€ ì˜¤ë²„ë¼ì´ë”© ë˜ì–´ ìˆìœ¼ë¯€ë¡œ `Child.method()`ê°€ ì‹¤í–‰ëœë‹¤.
        - â€¼ï¸Â ì˜¤ë²„ë¼ì´ë”© ëœ ë©”ì„œë“œëŠ” í•­ìƒ ìš°ì„ ê¶Œì„ ê°€ì§„ë‹¤.

---

# ì •ë¦¬

ë‹¤í˜•ì„±ì˜ í•µì‹¬ ì´ë¡ 

- **ë‹¤í˜•ì  ì°¸ì¡°**
    - í•˜ë‚˜ì˜ ë³€ìˆ˜ íƒ€ì…ìœ¼ë¡œ ë‹¤ì–‘í•œ ìì‹ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì°¸ì¡°í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥
- **ë©”ì„œë“œ ì˜¤ë²„ë¼ì´ë”©**
    - ê¸°ì¡´ ê¸°ëŠ¥ì„ í•˜ìœ„ íƒ€ì…ì—ì„œ ìƒˆë¡œìš´ ê¸°ëŠ¥ìœ¼ë¡œ ì¬ì •ì˜